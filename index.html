<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Personal Website</title>
    <!-- Material Icons and Inter font -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
        integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <style>
        /* CSS Variables for theming */
        :root {
            /* Default theme (Minimalist & Clean) */
            --bg-primary: #F5F5F7;
            --text-primary: #333333;
            --text-secondary: #666666;
            --accent-color: #4A90E2;
            --border-color: #E0E0E0;
            --card-bg: #FFFFFF;
            --nav-bg: rgba(245, 245, 247, 0.9);
            --section-bg-1: #F5F5F7;
            --section-bg-2: #FFFFFF;
            --section-bg-3: #F0F0F2;
            --section-bg-4: #FFFFFF;

            /* Button colors */
            --email-color: #E67E22;
            --linkedin-color: #0077B5;
            --github-color: #2C3E50;
            --scholar-color: #D35400;
            --resume-color: #F39C12;
            --theme-color: #8E44AD;
            --privacy-color: #C0392B;
        }

        [data-theme="warm"] {
            --bg-primary: #FAF3E0;
            --text-primary: #4B2E2A;
            --text-secondary: #8C6657;
            --accent-color: #FF6B6B;
            --border-color: #EAD8C8;
            --card-bg: #FFFFFF;
            --nav-bg: rgba(250, 243, 224, 0.9);
            --section-bg-1: #FAF3E0;
            --section-bg-2: #FFFFFF;
            --section-bg-3: #FDF8ED;
            --section-bg-4: #FFFFFF;
        }

        [data-theme="professional"] {
            --bg-primary: #F7F7F9;
            --text-primary: #2C3E50;
            --text-secondary: #7F8C8D;
            --accent-color: #1ABC9C;
            --border-color: #D5D8DC;
            --card-bg: #FFFFFF;
            --nav-bg: rgba(247, 247, 249, 0.9);
            --section-bg-1: #F7F7F9;
            --section-bg-2: #FFFFFF;
            --section-bg-3: #F0F2F4;
            --section-bg-4: #FFFFFF;
        }

        [data-theme="fresh"] {
            --bg-primary: #F3FFF5;
            --text-primary: #2F4F4F;
            --text-secondary: #708D81;
            --accent-color: #F9DC5C;
            --border-color: #E0F2E9;
            --card-bg: #FFFFFF;
            --nav-bg: rgba(243, 255, 245, 0.9);
            --section-bg-1: #F3FFF5;
            --section-bg-2: #FFFFFF;
            --section-bg-3: #E8FFF0;
            --section-bg-4: #FFFFFF;
        }

        [data-theme="modern"] {
            --bg-primary: #FBFBFD;
            --text-primary: #3B3054;
            --text-secondary: #BFA8D9;
            --accent-color: #FF0080;
            --border-color: #E5E1F8;
            --card-bg: #FFFFFF;
            --nav-bg: rgba(251, 251, 253, 0.9);
            --section-bg-1: #FBFBFD;
            --section-bg-2: #FFFFFF;
            --section-bg-3: #F6F6FA;
            --section-bg-4: #FFFFFF;
        }

        [data-theme="dark"] {
            --bg-primary: #000000;
            --text-primary: #E2E8F0;
            --text-secondary: #A0AEC0;
            --accent-color: #60A5FA;
            --card-bg: #111111;
            --border-color: #333333;
            --nav-bg: rgba(0, 0, 0, 0.9);
            --section-bg-1: #000000;
            --section-bg-2: #111111;
            --section-bg-3: #0A0A0A;
            --section-bg-4: #111111;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            line-height: 1.6;
            background: var(--bg-primary);
            color: var(--text-primary);
            transition: background-color 0.3s, color 0.3s;
        }

        h1,
        h2,
        h3 {
            color: var(--text-primary);
            margin-bottom: 1rem;
        }

        h2 {
            font-size: 2rem;
            font-weight: 600;
        }

        /* Navigation */
        .nav-container {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            display: flex;
            justify-content: center;
            background: var(--nav-bg);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid var(--border-color);
        }

        nav {
            width: 50%;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 0;
        }

        .nav-brand {
            font-weight: 700;
            font-size: 1.25rem;
            color: var(--text-primary);
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .nav-links {
            display: flex;
            align-items: center;
            gap: 2rem;
        }

        .nav-links a {
            color: var(--text-primary);
            text-decoration: none;
            font-weight: 500;
            transition: color 0.3s;
            position: relative;
        }

        .nav-links a::after {
            content: '';
            position: absolute;
            bottom: -4px;
            left: 0;
            width: 0;
            height: 2px;
            background: var(--accent-color);
            transition: width 0.3s ease;
        }

        .nav-links a:hover::after {
            width: 100%;
        }

        .nav-controls {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .control-button {
            height: 35px;
            width: 35px;
            border: none;
            border-radius: 8px;
            color: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: transform 0.3s ease;
        }

        .control-button:hover {
            transform: translateY(-2px);
        }

        .social-button {
            height: 35px;
            width: 35px;
            border: none;
            border-radius: 8px;
            color: white;
            text-decoration: none;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: transform 0.3s ease;
        }

        .social-button:hover {
            transform: translateY(-2px);
        }

        .social-button[data-type="email"] {
            background: var(--email-color);
        }

        .social-button[data-type="linkedin"] {
            background: var(--linkedin-color);
        }

        .social-button[data-type="github"] {
            background: var(--github-color);
        }

        .social-button[data-type="scholar"] {
            background: var(--scholar-color);
        }

        .social-button[data-type="resume"] {
            background: var(--resume-color);
        }

        .theme-toggle {
            background: var(--theme-color);
        }

        .privacy-toggle {
            background: var(--privacy-color);
        }

        /* Main container */
        .container {
            width: 50%;
            margin: 0 auto;
            padding: 6rem 0 2rem 0;
        }

        /* Sections */
        section {
            padding: 2rem 0;
            position: relative;
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.6s ease, transform 0.6s ease;
        }

        section.visible {
            opacity: 1;
            transform: translateY(0);
        }

        /* Header section */
        .header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            gap: 2rem;
        }

        .bio {
            flex: 1;
        }

        .profile-photo {
            width: 200px;
            height: 200px;
            object-fit: cover;
            border-radius: 12px;
        }

        /* Privacy quotes */
        .quotes-section {
            margin: 0;
        }

        .scramble-text {
            font-size: 1.2rem;
            min-height: 2em;
            padding: 1rem;
            border-left: 4px solid var(--accent-color);
            background: var(--card-bg);
            border-radius: 0 12px 12px 0;
            transition: all 0.3s ease;
            font-family: monospace;
        }

        /* News timeline */
        .timeline-container {
            height: 400px;
            overflow-y: auto;
            padding-right: 1rem;
            scrollbar-width: thin;
            scrollbar-color: var(--accent-color) var(--card-bg);
        }

        .timeline {
            border-left: 2px solid var(--accent-color);
            padding-left: 2rem;
            margin-left: 1rem;
        }

        .timeline-item {
            margin-bottom: 1.5rem;
            position: relative;
            opacity: 0;
            transform: translateX(-20px);
            transition: opacity 0.5s ease, transform 0.5s ease;
        }

        .timeline-item.visible {
            opacity: 1;
            transform: translateX(0);
        }

        .timeline-item::before {
            content: '';
            position: absolute;
            left: -2.3rem;
            top: 0.5rem;
            width: 10px;
            height: 10px;
            background: var(--accent-color);
            border-radius: 50%;
        }

        /* Cards */
        .cards-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 2rem;
        }

        .card {
            background: var(--card-bg);
            border-radius: 12px;
            overflow: hidden;
            text-decoration: none;
            color: var(--text-primary);
            box-shadow: var(--card-shadow);
            transition: all 0.3s ease;
            opacity: 0;
            transform: translateY(20px);
            transform: scale(1);
        }

        .card.visible {
            opacity: 1;
            transform: translateY(0);
        }

        .card:hover {
            transform: scale(1.02);
            background: var(--section-bg-3);
        }

        .card img {
            width: 100%;
            height: 200px;
            object-fit: cover;
            transition: transform 0.3s ease;
        }

        .card:hover img {
            transform: none;
        }

        .card-content {
            padding: 1.5rem;
        }

        /* Papers */
        .paper {
            background: var(--card-bg);
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 2rem;
            box-shadow: var(--card-shadow);
            transform: scale(1);
        }

        .paper:hover {
            transform: scale(1.02);
            background: var(--section-bg-3);
        }

        /* Achievements */
        .achievements {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 2rem;
        }

        .achievement-card {
            background: var(--card-bg);
            border-radius: 12px;
            padding: 1.5rem;
            box-shadow: var(--card-shadow);
            transition: all 0.3s ease;
            transform: scale(1);
        }

        .achievement-card:hover {
            transform: scale(1.02);
            background: var(--section-bg-3);
        }

        /* Responsive design */
        @media (max-width: 1024px) {

            nav,
            .container {
                width: 70%;
            }
        }

        @media (max-width: 768px) {

            nav,
            .container {
                width: 90%;
            }

            .nav-links {
                display: none;
            }

            .header {
                flex-direction: column-reverse;
                align-items: center;
                text-align: center;
            }

            .profile-photo {
                margin-top: 1rem;
                width: 180px;
                height: 180px;
            }

            .cards-grid,
            .achievements {
                grid-template-columns: 1fr;
            }

            .bio h1 {
                font-size: 2.2rem;
            }

            .bio .title {
                font-size: 1.25rem;
            }
        }

        .dud {
            color: var(--accent-color);
        }

        /* Header section specific padding */
        section.header-section {
            padding-bottom: 1rem;
        }

        /* Quotes section specific padding */
        section.quotes-section {
            padding: 0 0 1rem 0;
        }

        /* Link styles */
        a {
            color: var(--accent-color);
            text-decoration: none;
            transition: all 0.3s ease;
        }

        a:hover {
            color: var(--accent-color);
            text-decoration: none;
        }

        /* Keep nav links white */
        .nav-links a {
            color: var(--text-primary);
            text-decoration: none;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .nav-links a:hover {
            color: var(--accent-color);
            text-decoration: none;
        }

        .nav-links a::after {
            display: none;
        }

        .bio h1 {
            font-size: 3rem;
            margin-bottom: 0.5rem;
            line-height: 1.2;
        }

        .bio .title {
            font-size: 1.5rem;
            color: var(--accent-color);
            margin-bottom: 1.5rem;
            font-weight: 500;
        }

        .social-links {
            display: flex;
            gap: 0.75rem;
            margin-top: 2rem;
            align-items: center;
        }

        .theme-selector {
            position: relative;
        }

        .theme-menu {
            display: none;
            position: absolute;
            right: 0;
            top: 100%;
            background: var(--card-bg);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 0.5rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            z-index: 1000;
        }

        .theme-menu.active {
            display: block;
        }

        .theme-menu button {
            display: block;
            width: 100%;
            padding: 0.5rem 1rem;
            border: none;
            background: none;
            color: var(--text-primary);
            cursor: pointer;
            text-align: left;
            border-radius: 4px;
        }

        .theme-menu button:hover {
            background: var(--border-color);
        }

        .popup {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: var(--card-bg);
            padding: 1.5rem;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
            z-index: 1100;
            text-align: center;
            border: 1px solid var(--border-color);
        }

        .popup.active {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        .popup-content {
            margin-bottom: 1rem;
        }

        .popup-close {
            padding: 0.5rem 1rem;
            background: var(--accent-color);
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 500;
            transition: opacity 0.3s ease;
        }

        .popup-close:hover {
            opacity: 0.9;
        }

        .overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(4px);
            z-index: 1050;
        }

        .overlay.active {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }

            to {
                opacity: 1;
            }
        }

        .social-button img {
            width: 24px;
            height: 24px;
            filter: brightness(0) invert(1);
            /* This makes the icons white */
        }

        /* Update social button hover animation */
        .social-button {
            transform: scale(1);
            transition: all 0.3s ease;
        }

        .social-button:hover {
            transform: scale(1.1);
            opacity: 0.9;
        }

        /* Update control button hover animation */
        .control-button {
            transform: scale(1);
            transition: all 0.3s ease;
        }

        .control-button:hover {
            transform: scale(1.1);
            opacity: 0.9;
        }
    </style>
</head>

<body>
    <!-- Navigation -->
    <div class="nav-container">
        <nav>
            <a href="#" class="nav-brand">
                Yash Maurya
            </a>
            <div class="nav-links">
                <a href="#about">About</a>
                <a href="#news">News</a>
                <a href="#research">Research</a>
                <a href="#projects">Projects</a>
                <a href="#writings">Writings</a>
                <a href="#achievements">Achievements</a>
                <div class="nav-controls">
                    <button class="control-button privacy-toggle">
                        <i class="material-icons">lock</i>
                    </button>
                    <button class="control-button theme-toggle" onclick="toggleTheme()">
                        <i class="material-icons">brightness_4</i>
                    </button>
                </div>
            </div>
        </nav>
    </div>

    <div class="container">
        <!-- Header -->
        <section id="about" class="header-section">
            <div class="header">
                <div class="bio">
                    <h1>Yash Maurya</h1>
                    <div class="title">Privacy Engineer</div>
                    <p>I am a graduate student in the <a href="https://privacy.cs.cmu.edu/masters/index.html">Privacy
                            Engineering Program</a> at <a href="https://www.cmu.edu/">Carnegie Mellon University</a>,
                        pursuing my passion for creating privacy-conscious AI solutions and ensuring the ethical use of
                        data. My mission is to design robust privacy systems for the greater good of society.</p>
                    <p>This summer, as an AI Governance intern at <a
                            href="https://www.bnymellon.com/us/en/index.jsp">BNY AI Hub</a>, I helped develop Eliza,
                        BNY's AI platform for 15,000+ users. I implemented LLM safety measures, created benchmarking
                        pipelines for LLMs and RAG agents, and contributed to governance validation. This work led to
                        Eliza's feature in <a
                            href="https://fortune.com/2024/08/15/exclusive-how-bnys-new-ai-tool-eliza-is-minting-an-army-of-disposable-assistants-that-could-save-billions-in-labor-costs/">Fortune
                            magazine</a>.</p>
                    <div class="social-links" style="display: flex; gap: 0.75rem; margin-top: 1rem;">
                        <a href="mailto:maurya.yash152@gmail.com" class="social-button" data-type="email">
                            <i class="fas fa-envelope fa-lg"></i>
                        </a>
                        <a href="https://www.linkedin.com/in/yashmaurya/" class="social-button" data-type="linkedin">
                            <i class="fab fa-linkedin-in fa-lg"></i>
                        </a>
                        <a href="https://github.com/yashmaurya01" class="social-button" data-type="github">
                            <i class="fab fa-github fa-lg"></i>
                        </a>
                        <a href="https://scholar.google.com/citations?user=md0vz3wAAAAJ&hl=en" class="social-button"
                            data-type="scholar">
                            <i class="fas fa-graduation-cap fa-lg"></i>
                        </a>
                        <a href="cv.pdf" class="social-button" data-type="resume" style="width: auto; padding: 0 15px;">
                            Resume
                        </a>
                    </div>
                </div>
                <img src="images/yash.jpeg" alt="Yash Maurya" class="profile-photo">
            </div>
        </section>

        <!-- Privacy quotes -->
        <section class="quotes-section">
            <div class="scramble-text">Privacy is not something that I'm merely entitled to, it's an absolute
                prerequisite.</div>
        </section>

        <!-- News -->
        <section id="news">
            <h2>Recent News</h2>
            <div class="timeline-container">
                <div class="timeline" id="news-timeline"></div>
            </div>
        </section>

        <!-- Research -->
        <section id="research">
            <h2>Research</h2>
            <div class="paper">
                <h3>Paper Title</h3>
                <p>Authors: Author 1, Author 2</p>
                <p>Published in Conference/Journal, Year</p>
                <p><strong>TL;DR:</strong> Brief description of the paper...</p>
            </div>
            <div class="paper">
                <h3>Paper Title</h3>
                <p>Authors: Author 1, Author 2</p>
                <p>Published in Conference/Journal, Year</p>
                <p><strong>TL;DR:</strong> Brief description of the paper...</p>
            </div>
        </section>

        <!-- Projects -->
        <section id="projects">
            <h2>Projects</h2>
            <div class="cards-grid">
                <a href="#project-1" class="card">
                    <img src="/api/placeholder/400/200" alt="Project 1">
                    <div class="card-content">
                        <h3>Project Title 1</h3>
                        <p>Description of the project...</p>
                    </div>
                </a>
                <a href="#project-2" class="card">
                    <img src="/api/placeholder/400/200" alt="Project 2">
                    <div class="card-content">
                        <h3>Project Title 2</h3>
                        <p>Description of the project...</p>
                    </div>
                </a>
                <a href="#project-3" class="card">
                    <img src="/api/placeholder/400/200" alt="Project 3">
                    <div class="card-content">
                        <h3>Project Title 3</h3>
                        <p>Description of the project...</p>
                    </div>
                </a>
                <a href="#project-4" class="card">
                    <img src="/api/placeholder/400/200" alt="Project 4">
                    <div class="card-content">
                        <h3>Project Title 4</h3>
                        <p>Description of the project...</p>
                    </div>
                </a>
            </div>
        </section>

        <!-- Writings -->
        <section id="writings">
            <h2>Writings</h2>
            <div class="cards-grid">
                <a href="#writing-1" class="card">
                    <img src="/api/placeholder/400/200" alt="Writing 1">
                    <div class="card-content">
                        <h3>Article Title 1</h3>
                        <p>Brief overview of the article...</p>
                    </div>
                </a>
                <a href="#writing-2" class="card">
                    <img src="/api/placeholder/400/200" alt="Writing 2">
                    <div class="card-content">
                        <h3>Article Title 2</h3>
                        <p>Brief overview of the article...</p>
                    </div>
                </a>
            </div>
        </section>

        <!-- Achievements -->
        <section id="achievements">
            <h2>Achievements</h2>
            <div class="achievements">
                <div class="achievement-card">
                    <h3>Achievement 1</h3>
                    <p>Description of the achievement and its significance...</p>
                </div>
                <div class="achievement-card">
                    <h3>Achievement 2</h3>
                    <p>Description of the achievement and its significance...</p>
                </div>
                <div class="achievement-card">
                    <h3>Achievement 3</h3>
                    <p>Description of the achievement and its significance...</p>
                </div>
                <div class="achievement-card">
                    <h3>Achievement 4</h3>
                    <p>Description of the achievement and its significance...</p>
                </div>
            </div>
        </section>
    </div>

    <div class="overlay" id="overlay"></div>
    <div class="popup" id="privacyPopup">
        <div class="popup-content">
            <h3>ðŸš§ Under Construction</h3>
            <p>Privacy features coming soon!</p>
        </div>
        <button class="popup-close">Got it</button>
    </div>

    <script>
        // TextScramble class implementation
        class TextScramble {
            constructor(el) {
                this.el = el;
                this.chars = '!<>-_\\/[]{}â€”=+*^?#________';
                this.update = this.update.bind(this);
            }
            setText(newText) {
                const oldText = this.el.innerText;
                const length = Math.max(oldText.length, newText.length);
                const promise = new Promise((resolve) => this.resolve = resolve);
                this.queue = [];
                for (let i = 0; i < length; i++) {
                    const from = oldText[i] || '';
                    const to = newText[i] || '';
                    const start = Math.floor(Math.random() * 40);
                    const end = start + Math.floor(Math.random() * 40);
                    this.queue.push({ from, to, start, end });
                }
                cancelAnimationFrame(this.frameRequest);
                this.frame = 0;
                this.update();
                return promise;
            }
            update() {
                let output = '';
                let complete = 0;
                for (let i = 0, n = this.queue.length; i < n; i++) {
                    let { from, to, start, end, char } = this.queue[i];
                    if (this.frame >= end) {
                        complete++;
                        output += to;
                    } else if (this.frame >= start) {
                        if (!char || Math.random() < 0.28) {
                            char = this.randomChar();
                            this.queue[i].char = char;
                        }
                        output += `<span class="dud">${char}</span>`;
                    } else {
                        output += from;
                    }
                }
                this.el.innerHTML = output;
                if (complete === this.queue.length) {
                    this.resolve();
                } else {
                    this.frameRequest = requestAnimationFrame(this.update);
                    this.frame++;
                }
            }
            randomChar() {
                return this.chars[Math.floor(Math.random() * this.chars.length)];
            }
        }

        // Replace the existing quotes animation with the new one
        const quotes = [
            "Privacy is not something that I'm merely entitled to, it's an absolute prerequisite.",
            "Privacy is power. What people don't know, they can't corrupt.",
            "Arguing that you don't care about privacy because you have nothing to hide is like saying you don't care about free speech because you have nothing to say.",
            "Privacy is a fundamental human right.",
            "The right to privacy is essential to human dignity."
        ];

        const scrambleText = document.querySelector('.scramble-text');
        const fx = new TextScramble(scrambleText);

        let counter = 0;
        const next = () => {
            fx.setText(quotes[counter]).then(() => {
                setTimeout(next, 3000); // Wait 3 seconds before showing next quote
            });
            counter = (counter + 1) % quotes.length;
        };

        // News timeline data
        const newsItems = [
            { date: '2024-03', content: 'Published new research on privacy-preserving ML' },
            { date: '2024-02', content: 'Gave a keynote speech at Privacy Conference' },
            { date: '2024-01', content: 'Awarded research grant for privacy studies' },
            { date: '2023-12', content: 'Released new open-source privacy tool' },
            { date: '2023-11', content: 'Published in top privacy journal' }
        ];

        function createNewsItem(item) {
            const div = document.createElement('div');
            div.className = 'timeline-item';
            div.innerHTML = `
                <h3>${item.date}</h3>
                <p>${item.content}</p>
            `;
            return div;
        }

        // Intersection Observer for animations
        const observerOptions = {
            root: null,
            rootMargin: '0px',
            threshold: 0.2
        };

        const sectionObserver = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('visible');
                }
            });
        }, observerOptions);

        const cardObserver = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    setTimeout(() => {
                        entry.target.classList.add('visible');
                    }, entry.target.dataset.delay || 0);
                }
            });
        }, { threshold: 0.1 });

        // Theme toggle
        function toggleTheme() {
            const body = document.body;
            const icon = document.querySelector('.theme-toggle i');

            if (body.getAttribute('data-theme') === 'dark') {
                body.removeAttribute('data-theme');
                icon.textContent = 'brightness_4';
            } else {
                body.setAttribute('data-theme', 'dark');
                icon.textContent = 'brightness_5';
            }

            // Save manual preference
            localStorage.setItem('preferred-theme', body.getAttribute('data-theme') || '');
        }

        function checkSystemTime() {
            const hour = new Date().getHours();
            // Consider daytime between 6 AM and 6 PM (18:00)
            return hour >= 6 && hour < 18;
        }

        function setThemeBasedOnTime() {
            const isDaytime = checkSystemTime();
            const body = document.body;
            const icon = document.querySelector('.theme-toggle i');

            // Only auto-switch if user hasn't manually set a preference
            if (!localStorage.getItem('preferred-theme')) {
                if (isDaytime) {
                    body.removeAttribute('data-theme');
                    icon.textContent = 'dark_mode';
                } else {
                    body.setAttribute('data-theme', 'dark');
                    icon.textContent = 'light_mode';
                }
            }
        }

        // Initialize everything when DOM is loaded
        document.addEventListener('DOMContentLoaded', () => {
            // Start quote animation immediately
            next();

            // Display news items
            const timeline = document.getElementById('news-timeline');
            newsItems.forEach(item => {
                const newsItem = createNewsItem(item);
                timeline.appendChild(newsItem);
                cardObserver.observe(newsItem);
            });

            // Initialize observers
            document.querySelectorAll('section').forEach(section => {
                sectionObserver.observe(section);
            });

            document.querySelectorAll('.card').forEach((card, index) => {
                card.dataset.delay = index * 100;
                cardObserver.observe(card);
            });

            // Smooth scrolling for navigation
            document.querySelectorAll('nav a').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    if (this.getAttribute('href').startsWith('#')) {
                        e.preventDefault();
                        const sectionId = this.getAttribute('href').slice(1);
                        const section = document.getElementById(sectionId);
                        if (section) {
                            section.scrollIntoView({ behavior: 'smooth' });
                        }
                    }
                });
            });

            // Check for saved theme preference first
            const savedTheme = localStorage.getItem('preferred-theme');
            if (savedTheme) {
                document.body.setAttribute('data-theme', savedTheme);
                if (savedTheme === 'dark') {
                    document.querySelector('.theme-toggle i').textContent = 'light_mode';
                }
            } else {
                // If no preference is saved, set theme based on time
                setThemeBasedOnTime();
            }

            // Check time every hour to update theme if needed
            setInterval(setThemeBasedOnTime, 3600000); // 3600000 ms = 1 hour

            // Initialize privacy popup functionality
            const privacyButton = document.querySelector('.privacy-toggle');
            if (privacyButton) {
                privacyButton.addEventListener('click', showPrivacyPopup);
            }

            const overlay = document.getElementById('overlay');
            if (overlay) {
                overlay.addEventListener('click', closePrivacyPopup);
            }

            const closeButton = document.querySelector('.popup-close');
            if (closeButton) {
                closeButton.addEventListener('click', closePrivacyPopup);
            }
        });

        function showPrivacyPopup() {
            document.getElementById('overlay').classList.add('active');
            document.getElementById('privacyPopup').classList.add('active');
        }

        function closePrivacyPopup() {
            document.getElementById('overlay').classList.remove('active');
            document.getElementById('privacyPopup').classList.remove('active');
        }

        // Update the privacy button's onclick handler
        document.querySelector('.privacy-toggle').onclick = showPrivacyPopup;

        // Close popup when clicking overlay
        document.getElementById('overlay').onclick = closePrivacyPopup;
    </script>
</body>

</html>